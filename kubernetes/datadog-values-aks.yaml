datadog:
  apiKeyExistingSecret: dd
  apm:
    enabled: true
  logs:
    enabled: true
    containerCollectAll: true
  processAgent:
    enabled: true
    processCollection: true
  systemProbe:
    enabled: true
  clusterChecks:
    enabled: true
  kubeStateMetricsEnabled: true
  dogstatsd:
    nonLocalTraffic: true
    useHostPort: true
  env:
    - name: DD_ENV
      value: "lab"
    - name: DD_KUBELET_TLS_VERIFY
      value: false
    - name: DD_LOGS_CONFIG_PROCESSING_RULES
      value: >-
        [{
            "type": "mask_sequences",
            "name": "Id redaction",
            "replace_placeholder": "Id\\\":\\\"[Id REDACTED]",
            "pattern" : "(?:(Id\\\":\\\"[^\\\"]+))"
        }]
agents:
  enabled: true
  rbac:
    create: true
  podAnnotations:
    sidecar.istio.io/inject: "false"
clusterAgent:
  enabled: true
  rbac:
    create: true
  podAnnotations:
    sidecar.istio.io/inject: "false"
  confd:
    kube_controller_manager.yaml: |-
      cluster_check: true
      init_config:
      instances:
        - prometheus_url: https://kubernetes.default/metrics
          ssl_ca_cert: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt
          bearer_token_auth: true
    kube_scheduler.yaml: |-
      cluster_check: true
      init_config:
      instances:
        - prometheus_url: https://kubernetes.default/metrics
          ssl_ca_cert: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt
          bearer_token_auth: true
    kube_apiserver_metrics.yaml: |-
      cluster_check: true
      init_config:
      instances:
        - prometheus_url: https://kubernetes.default/metrics
          ssl_ca_cert: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt
          bearer_token_auth: true
